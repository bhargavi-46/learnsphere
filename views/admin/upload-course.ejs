<%- include('../partials/header', { title: 'Upload New Course' }) %>
<%- include('../partials/navbar', { page: 'admin', user: user }) %>

<main>
    <section id="admin-upload" class="page-section active animate-on-scroll">
         <div class="container" style="max-width: 800px;">
             <h2 class="section-title">Upload Course Content</h2>

             <!-- Display error message if passed from controller on POST failure -->
             <% if (typeof error !== 'undefined' && error) { %>
                <div class="error-message" style="max-width: 100%; margin-bottom: 1.5rem;"><%= error %></div>
             <% } %>

             <!-- IMPORTANT: enctype="multipart/form-data" is essential for file uploads -->
             <form action="/admin/courses/new" method="POST" enctype="multipart/form-data" style="background: var(--card-bg); padding: 2.5rem; border-radius: var(--border-radius-lg); box-shadow: var(--shadow-md);">

                 <div class="form-group">
                    <label for="course-title">Course Title</label>
                    <!-- Ensure name attributes match controller req.body access -->
                    <input type="text" id="course-title" name="title" required>
                </div>
                 <div class="form-group">
                    <label for="course-description">Course Description</label>
                    <textarea id="course-description" name="description" required rows="5"></textarea>
                </div>
                 <div class="form-group">
                    <label for="course-price">Price ($) - Enter 0 for free</label>
                    <input type="number" id="course-price" name="price" step="0.01" min="0" required placeholder="e.g., 49.99">
                </div>
                  <div class="form-group">
                    <label for="course-thumbnail">Thumbnail Image (JPG, PNG)</label>
                    <!-- Ensure name attributes match middleware/controller req.files access -->
                    <input type="file" id="course-thumbnail" name="thumbnail" accept="image/jpeg, image/png, image/gif" required style="padding: 0.5rem; border: 1px dashed var(--border-color); background-color: var(--bg-off-white);">
                </div>
                 <div class="form-group">
                    <label for="course-video">Course Video (MP4, MOV, etc.)</label>
                    <input type="file" id="course-video" name="video" accept="video/*" required style="padding: 0.5rem; border: 1px dashed var(--border-color); background-color: var(--bg-off-white);">
                </div>
                 <button type="submit" class="btn btn-primary" style="margin-top: 1rem;">Upload Course</button>
                 <!-- Link back to admin dashboard -->
                  <a href="/admin/dashboard" class="btn btn-secondary btn-sm" style="margin-left: 1rem; vertical-align: middle;">Cancel</a>
             </form>
        </div>
    </section>
</main>

<%- include('../partials/footer') %>